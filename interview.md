## 操作系统

进程与线程
- 进程是系统资源分配的基本单位，线程是 CPU 调度的基本单位
- 线程属于进程，进程可以有多个线程
- 进程有自己的独立地址空间，线程共享所属进程的地址空间
- 进程切换开销大（页表置换），线程切换开销小
- 线程之间通信更方便，共享数据；进程间通信麻烦点
- 多线程程序一个线程崩溃，整个程序就崩溃；多进程程序一个进程崩溃不会对其它进程造成影响，因为进程有自己的独立地址空间，因此多进程更加健壮

僵尸进程

孤儿进程

进程间通信
- 管道
- 命名管道
- 消息队列
- 信号
- 共享内存
- 信号量
- 套接字
- RPC（在套接字基础上实现）

同步与互斥
- 同步：先后顺序
- 互斥：对共享资源的访问
  - 临界区：共享资源一次只能被一个进程使用

进程状态
- 创建
- 就绪
- 执行
- 阻塞
- 完成

进程调度
- 批处理
  - 先来先服务
  - 短作业邮箱
  - 最短剩余时间优先
  - 最高响应比优先
- 交互
  - 时间片轮转
  - 优先级调度
  - 多级反馈队列调度

线程同步
- 互斥量
- 信号量
- 事件
- 临界区

程序与进程
- 程序是静态的，进程是动态的：程序是有序代码的集合，进程是程序的执行
- 进程有生命周期；程序通常是静态和可复制的
- 进程具有并行特性，可以描述并发；程序不能
- 进程与程序的组成不同：进程的组成包括程序、数据和进程控制块（即进程状态信息）
- 通过多次执行，一个程序可对应多个进程
- 进程是竞争计算机系统资源的基本单位

死锁产生的必要条件
- 互斥
- 请求和保持
- 不可抢占
- 循环等待

死锁处理
- 鸵鸟策略
- 预防：破坏条件
- 避免：检查资源分配状态（银行家算法）
- 解除：检测有向图是否存在环，抢占、终止

分页与分段
- 分页
  - 物理单位
  - 实现离散分配方式，提高内存的利用率
  - 大小固定，由系统决定
  - 一维地址空间：页表
- 分段
  - 逻辑单位
  - 满足用户需要
  - 长度不固定
  - 二维地址空间：段号 + 偏移

虚拟内存
- 分页 + 页面置换（调度）
- 虚拟地址空间连续

页面置换算法
- 先进先出
- 时钟算法
- 最近未使用算法（Not Recently Used, NRU）
- 最近最少使用算法（Least Recently Used, LRU）
- 最不经常使用算法（Least Frequently Used, LFU）

局部性原理
- 时间：最近访问的页面将来可能还会被访问
- 空间：被访问页面周围的页可能会被访问

## 计算机网络

OSI参考模型(7)：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
TCP/IP参考模型(4)：链路层、网络层、传输层、应用层

协议
- 数据链路层/介质访问控制子层：以太网、802.11 无线局域网
- 网络层：ARP 地址解析协议、DHCP 动态主机配置协议、ICMP Internet 消息控制协议、路由协议、IP、NAT 网络地址转换协议
- 传输层：UDP 用户数据报协议、TCP 传输控制协议
- 应用层：DNS 域名系统、SMTP 简单邮件传输协议、MIME 多用途 Internet 邮件扩展、IMAP Internet 邮件访问协议、WWW 万维网、HTTP 超文本传输协议、FTP 文件传输协议

TCP 与 UDP 区别
- UDP
  - 无连接（传输数据前不需要建立连接）
  - 面向数据报（报文一次性发完）
  - 不可靠（无需确认）
  - 实时性要求较高
- TCP
  - 面向连接（传输数据前建立连接，结束后释放）
  - 面向字节流（可拆分发送）
  - 可靠：数据包校验、根据序列号排序、丢弃重复数据、应答机制、超时重发、流量控制
  - 应答机制、重传机制、流量控制、拥塞避免

三次握手
- 客户端处于 CLOSED 状态，服务器处于 LISTEN 状态
- 客户端发送 SYN=1 报文，初始序列号 seq=x（客户端处于SYN-SENT 状态）
- 服务器发送 SYN=1 应答，初始序列号 seq=y，确认 ACK=x+1（服务器处于 SYN-RCVD 状态）
- 客户端发送 ACK=y+1 报文，序列号 seq=x+1（客户端处于 ESTABLISED 状态）
  - 服务器收到确认后，也处于 ESTABLISED 状态

四次挥手
- 客户端发送 FIN=1 报文，序列号 seq=u（客户端处于 FIN-WAIT-1 状态）
- 服务器发送 ACK=u+1 应答，序列号 seq=v（服务器处于 CLOSE-WAIT 状态）
- 服务器发送 FIN=1 报文，序列号 seq=w，确认 ACK=u+1（服务器处于 LAST-ACK 状态）
- 客户端发送 ACK=w+1 应答，序列号 seq=u+1（客户端处于 TIME-WAIT 状态）

四次挥手的第二、三次不能合并，因为服务器可能还没有接收完客户端的数据。

TCP
- 流量控制：接收方维护接收窗口，防止发送方发送速率太快
- 拥塞控制
  - 慢启动：拥塞窗口设置为最大报文段 MSS，每次收到确认后加倍窗口大小
  - 拥塞避免：窗口大小达到阈值时，线性增加窗口大小
  - 快速重传：接收方未收到报文段时立即发出重复确认
  - 快速恢复：收到三个重复确认后，将阈值减半，执行拥塞避免

HTTP
- 无连接：每次连接只处理一个请求，处理完毕后断开
  - Keep-Alive 保持连接 
- 无状态：服务器不知道客户端的状态，根据请求返回数据
  - Cookie 和 Session
- 明文
  - HTTPS=HTTP+TLS：加密、认证

Cookie 与 Session
- Cookie 客户端，请求时携带
- Session 服务器，查找客户端状态

HTTP Method
- GET
  - 幂等
  - 获取资源
  - 请求头，明文，字符限制 ASCII，长度限制
- POST
  - 改变资源
  - 请求体
- DELETE 删除资源
- PUT 上传 URI 表示
- PATCH 上传局部更新，PUT 的补充

HTTP 状态码
- 1xx：指示信息，继续操作
- 2xx：操作成功
- 3xx：重定向
- 4xx：客户端错误
- 5xx：服务器错误

HTTP 发展
- 1.0：短连接，连接无法复用
- 1.1：长链接
- 2.0：多路复用、首部压缩


301 与 302 区别
- 301 永久重定向，从新地址获取内容，地址也替换为新地址，可以缓存
- 302 临时重定向，从新地址获取内容，但是保留旧地址

## 数据库

事务特性（ACID）
- 原子性
- 一致性
- 隔离性
- 持久性

并发错误
- 丢失修改：两个事务对同一数据进行修改，T2 覆盖了 T1 的修改
- 脏读：T1 修改数据，T2 读取数据，T1 撤销
- 不可重复读：T2 读取数据，T1 修改数据，T2 再次读取数据
- 幻读：T1 读取数据范围，T2 插入新数据，T1 再次读取数据范围

隔离级别
- 未提交读：事务的修改，即使没有提交，对其他事务也是可见的
- 提交读：事务只能读取已提交事务的修改
- 可重复读：同一事务多次读取同一数据得到的结果相同
- 串行化：事务串行执行

隔离级别	|脏读	|不可重复读	|幻读
-----------|-------|----------|----
未提交读	|❌	  |❌	    |❌
提交读	    |✔️	   |❌	     |❌
可重复读	|✔️	   |✔️	      |❌
可串行化	|✔️	   |✔️	      |✔️

并发控制
- 悲观锁与乐观锁
- 行级锁与表级锁
- 读写锁与意向锁

多版本并发控制（Multi-Version Concurrency Control, MVCC）
- InnoDB 实现隔离级别：提交读、可重复读
- 保存快照
- 写操作（DELETE、INSERT、UPDATE）更新最新的版本快照，而读操作去读旧版本快照
- 只能读取已提交的快照

Next-key 锁
- 解决幻读问题：MVCC（可重复读隔离级别）+ Next-key 锁

索引类型
- 逻辑类型
  - 唯一索引（UNIQUE）
  - 主键索引（PRIMARY）
  - 普通索引（INDEX）
  - 组合索引
- 物理存储
  - 聚集索引（Clustered）
  - 非聚集索引

约束（CONSTRAINT）
- `NOT NULL`：非空
- `UNIQUE`：唯一
- `PRIMARY KEY`：唯一标识、非空
- `FOREIGN KEY`：外键
- `CHECK`：检查范围

索引数据结构（B+ 树）
- IO 效率高：中间节点存储索引，叶节点存储数据
- 查询效率高：遍历叶节点链表，顺序访问叶节点
- 查询效率稳定：B+ 树相对 B 树更加矮胖，从根到叶节点的路径长度相同

InnoDB 与 MyISAM 的区别
- InnoDB 支持事务，可以执行 Commit 或 Rollback
- InnoDB 支持外键
- MyISAM 只支持表级锁，InnoDB 支持表级锁和行级锁

分布式事务
- 两阶段提交
